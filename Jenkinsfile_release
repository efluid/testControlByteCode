node('socle-jenkins-maven-docker-14-4G') {

  checkout scm

  try{
    env.JAVA_HOME = "${variables.jdkPathPrefix}11.0.1"
    steps.withCredentials([[$class: 'UsernamePasswordMultiBinding', credentialsId: credentials.gpgMavenCentralPassphrase, passwordVariable: 'gpgPassword', usernameVariable: 'gpgUsername']]) {
      sh "mvn -B release:prepare release:perform -Dgpg.passphrase=${env.gpgPassword} -DreleaseVersion=${releaseVersion} -DdevelopmentVersion=${developmentVersion}"
    }
    sh "git push origin ${branch}"
  } catch (Exception e) {
    //TODO send mail
    throw e
  }
}
return this;
